/*
 * Copyright(c) 2016 - 2020, Clouds Studio Holding Limited. All rights reserved.
 * Project : components
 * File : GisTest.java
 * Date : 7/22/20, 12:51 AM
 * Author : Hsi Chu
 * Contact : hiylo@live.com
 */

package org.hiylo.components.commons.area;

import com.vividsolutions.jts.io.ParseException;
import org.junit.Test;

import java.awt.geom.Point2D;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class GisTest {
    private Gis gis = new Gis();

    @Test
    public void castToMysqlPolygon() {
    }

    @Test
    public void castToMysqlPoint() {
    }

    @Test
    public void castToMysqlLine() {
    }

    @Test
    public void createPolygon() {
        String points = "105.95517081430013,38.730194570203665;105.52168450740518,38.730194570203665;105.49868788634974,38.9285213431517;105.91090231876842,38.93391020237194;";
        try {
            System.out.println(gis.createPolygon(Arrays.asList(points.split(";"))));

        } catch (ParseException e) {
            e.printStackTrace();
        }
    }

    @Test
    public void inArea() {
        String pointsStr = "10833474.616513679 2283825.396175879,10833367.718158027 2283984.0196503196,10833324.599493563 2284054.3795951246,10833300.345244799 2284102.673782061,10833228.480804026 2284244.224710139,10833172.785862425 2284353.7174942163,10833126.073975923 2284440.3119163862,10833077.5654784 2284536.064714696,10833049.7180076 2284589.352933188,10832937.42981889 2284802.0873882854,10832904.19251503 2284867.4473961303,10832873.650127701 2284931.558177901,10832864.217919849 2284952.7896031705,10832857.031475773 2284968.6090747085,10832855.234864753 2284996.5012554894,10832856.582323018 2285006.492470347,10832989.980691206 2285055.615835383,10833117.090920825 2285105.1553183133,10833250.938441768 2285155.11091453,10833437.336835025 2285228.37878647,10833546.031801699 2285281.664260657,10833607.565729111 2285316.2164474204,10833669.997962035 2285349.935965728,10833749.49799964 2285396.1440571183,10833789.023442067 2285416.9584608003,10833844.269230913 2285450.261439639,10833894.574339455 2285476.0711914767,10833982.608279403 2285526.0254090615,10834052.676109158 2285564.323516792,10834100.735453926 2285589.716767177,10834160.921923075 2285624.268161951,10834233.235516606 2285663.398549959,10834301.955888096 2285703.361381808,10834369.32880132 2285739.5775955133,10834416.040687824 2285765.803068643,10834488.354281353 2285806.1818716424,10834545.845833974 2285839.0676112357,10834624.896718826 2285881.9438343835,10834712.48150602 2285928.982640255,10834748.413726406 2285951.4613034935,10834818.481556162 2285988.509388614,10834871.481581233 2286018.480798454,10834945.142633026 2286058.44257424,10834982.422311679 2286079.2559520532,10835059.676585512 2286118.3850150523,10835102.795249976 2286136.284442052,10835167.922399428 2286162.9254055163,10835222.269882763 2286181.241037254,10835308.058058936 2286207.4656483144,10835418.998789383 2286234.9389954726,10835429.329302745 2286235.7715202672,10835567.668351235 2286257.833408519,10835652.109069146 2286262.412286446,10835792.244728655 2286266.991162812,10835972.354983348 2286263.2448095377,10836011.431273019 2286262.8285479983,10836188.846611181 2286256.584623358,10836409.380613808 2286251.173219656,10836541.880676486 2286248.6756479824,10836755.677387789 2286245.761813775,10836846.855397021 2286246.1780758435,10836913.330004739 2286254.9195762975,10836985.643598268 2286271.1537763365,10837101.075856263 2286304.038377835,10837212.914892217 2286352.7407410233,10837265.016611777 2286378.965017297,10837362.033606824 2286444.7336119595,10837366.974287128 2286447.231147183,10837425.813298011 2286346.496858174,10837478.813323082 2286254.9195762975,10837534.508264683 2286156.265169603,10837582.56760945 2286073.0119420947,10837631.525259728 2285992.672088423,10837674.194771437 2285914.8293885523,10837716.864283148 2285822.416613906,10837741.118531909 2285766.219345582,10837758.186336594 2285722.5101966173,10837776.601599542 2285669.2264703396,10837796.364320755 2285619.689066545,10837815.677889213 2285563.907233599,10837834.542304916 2285513.536872074,10837852.957567865 2285465.2477531927,10837893.3813158 2285352.017414702,10837915.838953542 2285294.5693046595,10837945.483035361 2285212.9759147284,10837962.9999928 2285156.776097873,10837980.966102993 2285109.7345890286,10838005.220351756 2285049.371349788,10838025.881378477 2284989.4241404724,10838043.398335917 2284944.8798604216,10838067.203431923 2284879.936533442,10838088.313611401 2284822.9027118934,10838084.271236608 2284814.5765863177,10837946.381340872 2284788.765564262,10837822.415180536 2284773.778496456,10837720.906657942 2284761.7055685725,10837644.999842374 2284747.5510875913,10837552.923527632 2284725.9030290316,10837523.728598567 2284712.164819942,10837455.457379831 2284698.8429068117,10837384.491244566 2284683.023117824,10837345.414954895 2284670.533797579,10837301.39798492 2284658.8770882157,10837264.567459023 2284645.9714339185,10837234.025071695 2284633.482079254,10837200.787767835 2284616.413275783,10837167.101311224 2284596.8465719745,10837099.728397997 2284551.0520474943,10837073.228385461 2284533.5668242723,10837049.423289454 2284518.163156403,10837004.508013971 2284495.6820959495,10836953.753752673 2284472.784680923,10836891.321519751 2284446.973002685,10836741.753652388 2284383.2762298593,10836643.838351835 2284342.893152233,10836556.702717395 2284304.5915644835,10836466.872166427 2284263.7919270946,10836372.55008791 2284221.326866911,10836275.533092866 2284177.1963681574,10836201.87204107 2284142.6412538867,10836102.160129497 2284092.681895544,10836042.871965857 2284060.2082130956,10835962.473622741 2284016.9098478514,10835792.693881411 2283926.5656945677,10835681.30399821 2283876.189198082,10835618.422612533 2283855.7887450014,10835419.897094892 2283807.077333921,10835380.820805222 2283795.00353808,10835334.108918719 2283784.178746387,10835162.981719123 2283736.7160953535,10835080.337612234 2283715.899090308,10834992.75282504 2283693.0003475477,10834930.769744873 2283674.264983565,10834891.244302446 2283658.027647005,10834854.862929303 2283641.373948121,10834822.97308371 2283622.2221689136,10834787.040863322 2283597.24154636,10834760.990003543 2283572.260877414,10834716.074728059 2283529.7936337385,10834669.362841556 2283488.5752984295,10834550.786514277 2283389.4842381906,10834515.303446645 2283403.223798532,10834462.752574328 2283429.037480015,10834419.633909862 2283463.594427684,10834336.989802971 2283540.618630152,10834293.421985753 2283584.751217685,10834237.277891397 2283639.7085770983,10834204.489740293 2283670.9342494584,10834168.557519907 2283707.9886199436,10834137.565979823 2283740.0468131714,10834111.964272797 2283765.4435094073,10834074.684594145 2283819.5674561453,10834024.828638358 2283855.7887450014,10833996.532014804 2283884.099569523,10833960.599794416 2283908.6633248674,10833926.913337803 2283927.398362346,10833900.413325267 2283940.7210397855,10833873.464159977 2283948.6313732713,10833834.387870306 2283956.1253691236,10833804.294635732 2283959.039699716,10833751.29461066 2283956.9580350723,10833728.387820164 2283952.3783717193,10833687.065766718 2283936.557704504,10833649.786088066 2283924.4840248968,10833599.93013228 2283894.091611008,10833541.54027415 2283864.115464282,10833475.065666433 2283824.5635017864,10833474.616513679 2283825.396175879,10833474.616513679 2283825.396175879,10833474.616513679 2283825.396175879,10833474.616513679 2283825.396175879";
        String[] p = pointsStr.split(",");
        List<Point2D.Double> points = new ArrayList<>();
        for (String s : p) {
            Point2D.Double point = new Point2D.Double();
            point.setLocation(Double.valueOf(s.split(" ")[0]), Double.valueOf(s.split(" ")[1]));
            points.add(point);
        }
        Point2D.Double point = new Point2D.Double();
        point.setLocation(108.346733 * 100000, 22.813319 * 100000);
        System.out.println(Gis.isPtInPoly(point, points));
    }
}